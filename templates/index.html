<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/index.css">
    <link rel="shortcut icon" href="../static/favicon.ico" type="image/x-icon">
    <title>Colorway</title>
</head>
<body style="color: black;">
    <nav>
        <div class="nav-container">
            <!-- <img src="../static/assets/logo.png" alt="logo" /> -->
            <h6>cloudees</h6>
        </div>
        <div class="nav-container">
            <a href="/">Home</a>
            <a href="/about">About</a>
        </div>
    </nav>
   <center>
    <div class="upload">
        <!-- <p>colorway</p> -->
        <!-- <p>upload the image right here</p> -->
        <div class="preview-container">
  
            <img id="preview" alt="">
          </div>
        <form action="/upload" method="post" enctype="multipart/form-data">
            <br>
          <div class="btn-container">

            <label class="custom-file-upload">
              <input type="file" class="custom-file-input" id="file" name="file" accept="image/*" onchange="readURL(this);"/>
              Choose an image
          </label>
            <!-- <input type="file" class="custom-file-input" id="img" name="img" accept="image/*" onchange="readURL(this);"> -->
            <input type="submit">
          </div>
            <!-- <input type="file" name="file" id="file">
            <button type="submit">submit</button> -->
        </form>
    </div>

   </center>

   <script>
         function getBase64Image(img) {
    var canvas = document.createElement("canvas");
    canvas.width = img.naturalWidth;
    canvas.height = img.naturalHeight;

    var ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0);

    var dataURL = canvas.toDataURL("image/png");
   
    return dataURL.replace(/^data:image\/(png|jpg);base64,/, "");
}
    function readURL(input) {
        if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
          $('#preview').attr('src', e.target.result);

          bannerImage = document.getElementById('preview');
          bannerImage.addEventListener("load", e => {

          imgData = getBase64Image(bannerImage);
          localStorage.setItem("imgData", imgData);
          })
          
        };

        reader.readAsDataURL(input.files[0]);
        // console.log(reader)
    }
    }
   </script>
</body>
</html>